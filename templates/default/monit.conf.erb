# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overridden

set daemon <%= @poll_interval %>
<% unless @poll_start_delay.zero? %>
  with start delay <%= @poll_start_delay %>
<% end -%>

set logfile <%= @logfile %>
set idfile <%= @idfile %>
set statefile <%= @statefile %>

<% Array(@smtp_servers).each do |server| %>
<% if server.is_a?(String) %>
set mailserver <%= server %>
<% elsif server.is_a?(Hash) %>
set mailserver <%= server['host'] %>
  <% if server['username'] %>
  username "<%= server['username'] %>"
  <% end -%>
  <% if server['password'] %>
  password "<%= server['password'] %>"
  <% end -%>
<% end -%>
<% end -%>

set eventqueue
  basedir <%= @eventqueue_basedir %>
  slots <%= @eventqueue_slots %>

set mail-format {
  from: <%= @notification_from %>
  subject: <%= @notification_subject %>
  message: <%= @notification_message %>
}

<% if @httpd %>
set httpd port <%= @httpd_port %> and
  use address <%= @httpd_host %>
  <% Array(@httpd_allows).each do |allow| %>
  allow <%= allow %>
  <% end -%>

<% end -%>
<% Array(@notification_emails).each do |email| %>
set alert <%= email %>
<% end -%>

include <%= @includes_dir_path %>/*.conf
